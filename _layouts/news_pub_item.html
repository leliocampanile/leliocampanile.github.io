{%- comment -%}
Template compatto per la Home con badge Journal/Conference.
{%- endcomment -%}

{%- assign venue = entry.journal | default: entry.booktitle | default: entry.series -%}
{%- assign detail_path = '/' | append: site.scholar.details_dir | append: '/' | append: entry.key | append: '.html' -%}
{%- assign detail_url = detail_path | relative_url -%}
{%- assign primary_link = nil -%}
{%- if entry.doi -%}
  {%- assign primary_link = 'https://doi.org/' | append: entry.doi -%}
{%- elsif entry.url -%}
  {%- assign primary_link = entry.url -%}
{%- endif -%}

{%- comment -%}
Determina il tipo di pubblicazione:
- Journal se ha campo journal
- Conference se ha booktitle
- Altrimenti Other
{%- endcomment -%}
{%- assign pub_type = "Other" -%}
{%- if entry.journal -%}
  {%- assign pub_type = "Journal" -%}
{%- elsif entry.booktitle -%}
  {%- assign pub_type = "Conference" -%}
{%- endif -%}

<div class="news-pub">
  <div class="news-title">
    {%- if primary_link -%}
      <strong><a href="{{ primary_link }}" target="_blank" rel="noopener">{{ entry.title }}</a></strong>
    {%- else -%}
      <strong><a href="{{ detail_url }}">{{ entry.title }}</a></strong>
    {%- endif -%}
  </div>

  <div class="news-meta">
    <span class="pub-badge pub-badge-{{ pub_type | downcase }}">{{ pub_type }}</span>
    {{ entry.author }}
    {%- if venue %} â€” <em>{{ venue }}</em>{% endif -%}
    {%- if entry.year %}, {{ entry.year }}{% endif -%}
  </div>

  <div class="news-actions">
    <a class="btn btn-pub" href="{{ detail_url }}">Details</a>
    {%- if entry.doi -%}
      <a class="btn btn-pub" href="https://doi.org/{{ entry.doi }}" target="_blank" rel="noopener">DOI</a>
    {%- endif -%}
  </div>
</div>
